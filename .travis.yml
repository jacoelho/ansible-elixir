---

language: python
python: "2.7"

before_install:
  - sudo apt-get update -qq

install:
  # Install Ansible.
  - pip install ansible
  - echo -e "[travis]\nlocalhost"  >> inventory
  - ln -sf ../ansible-elixir jacoelho.elixir

script:
  # Check the role/playbook's syntax.
  - "ansible-playbook -i inventory tests/playbook.yml --syntax-check"
  # Run the role/playbook with ansible-playbook.
  - "ansible-playbook -i inventory tests/playbook.yml --connection=local --sudo"
  # Run bats
  - "curl -sL https://github.com/sstephenson/bats/archive/v0.4.0.tar.gz | tar xz"
  - "sudo bats-0.4.0/install.sh /usr/local"
  - "tests/check.bats"
